(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t.p+"static/media/logo.94f66043.svg"},16:function(e,n,t){e.exports=t(40)},21:function(e,n,t){},22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),l=t.n(c),o=(t(21),t(2)),u=t(3),i=t(15),m=t.n(i),d=(t(22),function(e){var n=e.newName,t=e.newNumber,a=e.onNameChange,c=e.onNumberChange,l=e.onAddClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name:"),r.a.createElement("td",null,r.a.createElement("input",{value:n,onChange:a}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Number:"),r.a.createElement("td",null,r.a.createElement("input",{value:t,onChange:c}))))),r.a.createElement("button",{type:"submit",onClick:l},"Add")))}),s=function(e){var n=e.handleFilterChange;return r.a.createElement(r.a.Fragment,null,"Show results with: ",r.a.createElement("input",{onChange:n}))},f=function(e){var n=e.message,t=e.isError,a={color:"green",backgroundColor:"#282c34",fontSize:24,borderStyle:"solid",borderColor:"green",borderRadius:5,padding:10,margin:10};if(n){if(t){var c=Object(o.a)(Object(o.a)({},a),{},{color:"red",borderColor:"red"});return r.a.createElement("div",{style:c},n)}return r.a.createElement("div",{style:a},n)}return r.a.createElement(r.a.Fragment,null)},b=function(e){var n=e.person,t=e.onDeleteClick;return r.a.createElement("tr",null,r.a.createElement("td",null,n.name),r.a.createElement("td",null,n.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:t(n)},"Delete")))},E=function(e){var n=e.persons,t=e.onDeleteClick;return r.a.createElement("table",null,r.a.createElement("tbody",null,n.filter((function(e){return e.visible})).map((function(e){return r.a.createElement(b,{key:e.id,person:e,onDeleteClick:t})}))))},p=t(4),h=t.n(p),g="/api/persons",v=function(){return h.a.get(g).then((function(e){return e.data}))},C=function(e){return h.a.post(g,e).then((function(e){return e.data}))},j=function(e,n){return h.a.put("".concat(g,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return h.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],l=Object(a.useState)(null),i=Object(u.a)(l,2),b=i[0],p=i[1],h=Object(a.useState)(null),g=Object(u.a)(h,2),w=g[0],k=g[1],N=Object(a.useState)(""),y=Object(u.a)(N,2),S=y[0],D=y[1],A=Object(a.useState)(""),F=Object(u.a)(A,2),x=F[0],I=F[1],J=function(e,n){p(e),setTimeout((function(){p(null)}),n)},L=function(e,n){k(e),setTimeout((function(){k(null)}),n)};return Object(a.useEffect)((function(){v().then((function(e){return c(e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{visible:!0})})))})).catch((function(e){return console.error(e)}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:m.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",null,"Phonebook"),r.a.createElement(f,{message:b,isError:!1}),r.a.createElement(f,{message:w,isError:!0}),r.a.createElement(s,{handleFilterChange:function(e){var n=e.target.value.toLowerCase();c(t.map((function(e){return function(e){return Object(o.a)(Object(o.a)({},e),{},{visible:e.name.toLowerCase().includes(n)})}(e)})))}}),r.a.createElement("h3",null,"Add new"),r.a.createElement(d,{onNameChange:function(e){return D(e.target.value)},onNumberChange:function(e){return I(e.target.value)},onAddClick:function(e){e.preventDefault();var n={name:S,number:x},a=t.findIndex((function(e){return e.name===S}));if(-1!==a){var r="".concat(S," already added! Do you want to replace phone number?");window.confirm(r)&&j(t[a].id,n).then((function(e){c(t.map((function(n){return n.id!==t[a].id?n:Object(o.a)(Object(o.a)({},e),{},{visible:!0})})));var n="".concat(e.name," phone number updated");J(n,5e3)})).catch((function(e){400===e.response.status?L(e.response.data.error,5e3):(console.log(e),c(t.filter((function(e){return e.id!==t[a].id}))),L("".concat(S," has already been deleted"),5e3))}))}else C(n).then((function(e){c(t.concat(Object(o.a)(Object(o.a)({},e),{},{visible:!0}))),J("".concat(e.name," added"),5e3)})).catch((function(e){return L(e.response.data.error,5e3)}));D(""),I("")},newName:S,newNumber:x}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(E,{persons:t,onDeleteClick:function(e){var n=e.id,a=e.name;return function(){window.confirm("Delete ".concat(a,"?"))&&(O(n),c(t.filter((function(e){return e.id!==n}))))}}})))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.55a3d088.chunk.js.map